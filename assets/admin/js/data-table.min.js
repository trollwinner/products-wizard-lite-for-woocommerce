function _createForOfIteratorHelper(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,c=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){c=!0,i=t},f:function(){try{r||null==a.return||a.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=Array(e);a<e;a++)n[a]=t[a];return n}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module&&"function"==typeof require?module.exports=e(require("jquery")):e(t.jQuery)}(this,(function(t){"use strict";var e="wcpwDataTable",a="wcpw",n={},o=t(document),i=function(e,a){return this.element=e,this.options=t.extend({},n,a),this.init()};i.prototype.init=function(){var e=this;return this.$element=t(this.element),this.hash=this.element.getAttribute("data-hash"),this.$body=this.$element.children("table").children("tbody"),this.$template=t("<div/>").html(this.$element.children('[data-component~="'.concat(a,'-data-table-template"]')).html()).contents(),t.fn.sortable&&this.$element.sortable({items:'[data-component~="'.concat(a,'-data-table-item"]'),distance:50,update:function(){return e.recalculateIds()},cancel:"input,textarea,button,select,option,.".concat(a,'-modal[data-hash="').concat(this.hash,'"]')}),this.initEventListeners().exposeCurrentValues()},i.prototype.initEventListeners=function(){var e=this;return this.$element.on("click",'[data-component~="'.concat(a,'-data-table-item-add"][data-hash="').concat(this.hash,'"]'),(function(){return e.addItem(t(this).closest('[data-component~="'.concat(a,'-data-table-item"]')))})),this.$element.on("click",'[data-component~="'.concat(a,'-data-table-item-remove"][data-hash="').concat(this.hash,'"]'),(function(){return e.removeItem(t(this).closest('[data-component~="'.concat(a,'-data-table-item"]')))})),this.$element.on("click",'[data-component~="'.concat(a,'-data-table-item-clone"][data-hash="').concat(this.hash,'"]'),(function(){return e.cloneItem(t(this).closest('[data-component~="'.concat(a,'-data-table-item"]')))})),this.$element.on("click",'[data-component~="'.concat(a,'-data-table-item-modal-close"][data-hash="').concat(this.hash,'"]'),(function(){return e.exposeCurrentValues(this.closest('[data-component~="'.concat(a,'-data-table-item-modal"]')))})),this.$element.on("click",'[data-component~="'.concat(a,'-data-table-item-modal-switch"][data-hash="').concat(this.hash,'"]'),(function(n){n.preventDefault();var o=this.closest('[data-component~="'.concat(a,'-data-table-item"][data-hash="').concat(e.hash,'"]')),i="next"===this.getAttribute("data-direction")?o.nextElementSibling:o.previousElementSibling;if(i){var r=i.querySelector('[data-component~="'.concat(a,'-data-table-item-open-modal"][data-hash="').concat(e.hash,'"]'));r&&t(r).trigger("click")}})),this},i.prototype.exposeCurrentValues=function(e){var n=this,o=e||'[data-component~="'.concat(a,'-data-table-item-modal"][data-hash="').concat(this.hash,'"]');return this.$element.find(o).each((function(){var e=[],o=!1;t(this).find('tbody [data-component~="'.concat(a,'-data-table-body-item"][data-hash="').concat(n.hash,'"] > td > :input:not([type="hidden"], [type="checkbox"])')).each((function(){this.value&&("select"===this.nodeName.toLowerCase()?(this.multiple?this.selectedOptions.length>0&&(o=!0):this.options[this.selectedIndex].defaultSelected||(o=!0),e.push(this.options[this.selectedIndex].text)):(o=!0,e.push(this.value)))})),n.element.querySelector('[href="#'.concat(this.getAttribute("id"),'"][data-hash="').concat(n.hash,'"]')).setAttribute("data-name",o?e.join("; "):"")})),this},i.prototype.addItem=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$template;t=0!==t.length?t:this.$body.children('[data-component~="'.concat(a,'-data-table-item"]:last')),0===e.length&&(e=t);var n=e.clone();return n.find('[data-component~="'.concat(a,'-data-table-item-open-modal"]')).each((function(){var t=this.nextElementSibling;if(t){var e=Math.random().toString(36).substr(2);this.setAttribute("href",this.getAttribute("href")+"-".concat(e.toString())),t.setAttribute("id",t.getAttribute("id")+"-".concat(e.toString()))}})),n.insertAfter(t),this.recalculateIds(),this.$element.trigger("added.item.dataTable.".concat(a),[this,n]),n},i.prototype.removeItem=function(t){return t.is(":only-child")&&this.addItem(t),t.remove(),this.recalculateIds(),this.$element.trigger("removed.item.dataTable.".concat(a),[this]),this},i.prototype.cloneItem=function(t){var e=this.addItem(t,t);return this.$element.trigger("cloned.item.dataTable.".concat(a),[this,e]),this},i.prototype.recalculateIds=function(){var e=this.element.getAttribute("data-key");return this.$body.children('[data-component~="'.concat(a,'-data-table-item"]')).each((function(n){var o=t(this);o.find(":input").each((function(){var t=new RegExp("(\\[?)".concat(e.replaceAll("[","\\[").replaceAll("]","\\]"),"(]?)\\[-?\\d+\\]"));if(this.labels){var a,o=_createForOfIteratorHelper(this.labels);try{for(o.s();!(a=o.n()).done;){var i=a.value;i.getAttribute("for")&&i.setAttribute("for",i.getAttribute("for").replace(t,"".concat(e,"[").concat(n,"]")))}}catch(t){o.e(t)}finally{o.f()}}this.getAttribute("name")&&this.setAttribute("name",this.getAttribute("name").replace(t,"".concat(e,"[").concat(n,"]"))),this.getAttribute("id")&&this.setAttribute("id",this.getAttribute("id").replace(t,"".concat(e,"[").concat(n,"]")))})),o.find('[data-component~="'.concat(a,'-data-table"]')).each((function(){var t=this.getAttribute("data-key");t&&this.setAttribute("data-key",t.replace(new RegExp("\\[(-?\\d+)\\]"),"[".concat(n,"]")))}))})),this},t.fn[e]=function(a){return this.each((function(){t.data(this,e)||t.data(this,e,new i(this,a))}))};var r=function(){return t('[data-component~="'.concat(a,'-data-table"]')).each((function(){return t(this).wcpwDataTable()}))};o.ready((function(){return r()})),o.on("init.dataTable.".concat(a),(function(){return r()}))}));